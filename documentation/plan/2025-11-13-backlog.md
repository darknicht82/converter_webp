# Backlog Técnico – Integración WebP & WordPress (2025-11-13)

## Sprint 1 – Fundamentos (Backend/Infra)

- [ ] Implementar tablas `wpw_clients`, `wpw_tokens`, `wpw_sites`, `wpw_conversions` en WebP core.
- [ ] Crear CLI/endpoint para generar tokens y asociarlos a clientes.
- [ ] Activar autenticación por token en endpoints existentes (`api.php`).
- [ ] Registrar métricas básicas por conversión (bytes, costo, site_id).
- [ ] Habilitar descarga del plugin (`wp/download-plugin`).
- [ ] Configurar logging estructurado (JSON) para auditoría.

## Sprint 2 – Dashboard WebP

- [ ] Maquetar frontend de sección WordPress (tabs Dashboard/Tokens/Plugin/API).
- [ ] Implementar gráficos (imágenes por día, ahorro, costo).
- [ ] CRUD de tokens (crear, revocar, regenerar) en UI.
- [ ] Tabla de conversiones recientes con paginación.
- [ ] Implementar login básico en WebP core (usuarios internos).

## Sprint 3 – Plugin WordPress (MVP)

- [ ] Estructurar plugin (`webp-converter-bridge/`) con página de ajustes.
- [ ] Configurar conexión (URL + token) y validación.
- [ ] Registrar sitio en WebP (`/wp/register-site`).
- [ ] Escanear attachments pendientes (filtro por mime type).
- [ ] Consumir `/wp/convert` y reemplazar archivos.
- [ ] Registrar conversiones en `wp_webp_conversion_stats`.
- [ ] Pantalla de dashboard con KPIs y tabla.
- [ ] Comando WP-CLI `wp webp-converter run`.

## Sprint 4 – Métricas y costos

- [ ] Mostrar contador y costo acumulado en WebP y WP.
- [ ] Exportación CSV desde ambos paneles.
- [ ] Reporte automático (`/wp/report`) tras cada lote.
- [ ] Alertas por cuota superada o token suspendido.
- [ ] Notificaciones email (opcional) al superar umbrales.

## Sprint 5 – Seguridad y UX avanzada

- [ ] Rotación de tokens y expiración programada.
- [ ] Rate limiting por token/IP.
- [ ] Estado en tiempo real (polling o WebSocket) para lotes grandes.
- [ ] Guías paso a paso en UI + enlaces a documentación.
- [ ] Preparar releases del plugin con versionado semántico.

## Riesgos a monitorear

- Latencia de conversión cuando se procesan cientos de imágenes.
- Sincronización de métricas si el plugin queda offline.
- Gestión de grandes archivos (limitar tamaño, convertir a streaming).
- Compatibilidad con hostings que bloquean `curl` o `exec` en WP.

---

Este backlog se actualizará conforme avance el desarrollo y se completen tareas. Se recomienda revisarlo en cada sprint.

